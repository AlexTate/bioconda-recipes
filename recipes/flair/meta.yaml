{% set version="1.5.1" %}

package:
  name: flair
  version: {{ version }}

build:
  number: 0
  noarch: generic

source:
  url: https://github.com/BrooksLabUCSC/flair/archive/v{{ version }}.tar.gz
  sha256: 638b9fa87c04cae3e5af87f303183bb65b45f381c08e9eb68daa62f5e7cc97e7
  patches:                                                                                                                                                             
    - flair.patch
  
requirements:
  run:
    - python >=3.6
    - numpy
    - pandas
    - rpy2
    - tqdm
    - ncls
    - samtools
    - bedtools
    - pybedtools
    - minimap2
    - intervaltree
    - pysam >=0.16.0
    - r-ggplot2
    - r-qqman
    - bioconductor-deseq2
    - bioconductor-drimseq
    - bioconductor-stager
    - matplotlib-base
    - seaborn
    - kerneltree

test:
  commands:
    - flair.py --help 2>&1 | grep usage
    - flair.py align --help | grep usage
    - flair.py correct --help | grep usage
    - flair.py collapse --help | grep usage
    - flair.py quantify --help | grep usage
    - flair.py diffExp --help | grep usage
    - samtools --help | grep Usage

about:
  home: https://github.com/BrooksLabUCSC/flair
  license: BSD-3
  summary: Correction, isoform definition, and alternative splicing analysis of noisy reads (ONT and PacBio). 

extra:
  identifiers:
    - doi:10.1101/410183
